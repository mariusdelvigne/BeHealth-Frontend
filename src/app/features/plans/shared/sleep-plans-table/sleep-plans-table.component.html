<div class="border border-3" style="box-shadow: 0 0 16px rgba(0, 0, 0, 0.3)">
  <div class="w-100 p-3 sleep-color" (click)="setVisibility()">
    <h3>Sleep Plans</h3>
    @if (selectedSleepPlan) {
      <div class="p-2 rounded bg-body-secondary text-truncate">{{ selectedSleepPlan.name }}</div>
    }
  </div>

  @if (isVisible) {
    <form class="d-flex flex-column justify-content-center p-3 rounded"
          [formGroup]="form" (submit)="emitSearchPlan()">
      <div class="d-flex justify-content-center input-group gap-2">
        <input class="rounded-0 search-input w-75 p-2" formControlName="name" placeholder="Title">

        <button type="submit" class="search-btn p-2 rounded-0">
          <i class="fa-solid fa-magnifying-glass"></i>
        </button>
      </div>
    </form>

    <div class="d-flex justify-content-center mb-2">
      <div class="rounded-3 overflow-hidden">
        <button type="button" class="page-btn p-2" (click)="previousPage()" style="width: 50px"
                [disabled]="pageNumber <= 1">
          <i class="fa-solid fa-angle-left"></i>
        </button>

        <input type="button" class="page-btn p-2" [value]="pageNumber" style="width: 100px">

        <button type="button" class="page-btn p-2" (click)="nextPage()" style="width: 50px">
          <i class="fa-solid fa-chevron-right"></i>
        </button>
      </div>
    </div>
    <hr class="m-0">
    @if (sleepPlans) {
      <div class="container overflow-hidden">
        <div class="row g-3 mt-1 max-vh-50 overflow-auto">
          @for (sleepPlan of sleepPlans; track $index) {
            <div class="col-12">
              <div class="card pt-3 border-top-sleep-color" (click)="selectPlan(sleepPlan)">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <i class="fa-solid fa-bed custom-icon p-3 rounded-1"></i>
                  <h4 class="text-end">{{ sleepPlan.name }}</h4>
                </div>
                <div class="card-body">
                  <p><strong>Duration:</strong> {{ sleepPlan.durationInDays }} days</p>
                </div>
              </div>
            </div>
          }
        </div>
      </div>
    } @else {
      <h2>No Sleeps Plans Found</h2>
    }
  }
</div>
